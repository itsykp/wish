<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="title" content="Happy Birthday Website 2.0 | Aoudumber Bade">
  <meta name="github" content="https://github.com/Aoudumber-Bade">
  <title>Birthday Gift Animation</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==2" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

  <script type="text/javascript">
  var colours = ['#ff3366', '#ff6699', '#ff33cc', '#ff99cc', '#ff66bb', '#ff3388', '#ff66cc', '#ff9999'];
  var sizes = ['10px', '12px', '14px', '16px', '18px'];
  var hearts = [];
  var i = 0;
  var speed = 10;
  var limit = 20;

  function generateHeart() {
      if (i > limit) return;
      var heart = document.createElement('div');
      heart.innerHTML = '&#9829;'; // HTML entity for a heart
      heart.className = 'heart-cursor';
      
      var style = heart.style;
      style.color = colours[Math.floor(Math.random() * colours.length)];
      style.fontSize = sizes[Math.floor(Math.random() * sizes.length)];
      style.position = 'absolute';
      style.zIndex = '9999';
      style.opacity = '0';
      style.pointerEvents = 'none';

      document.body.appendChild(heart);
      hearts.push(heart);
      i++;
  }

  document.addEventListener('mousemove', function(e) {
      if (Math.random() < 0.2) { // Control the density of hearts
          generateHeart();
      }

      var x = e.clientX;
      var y = e.clientY;

      hearts.forEach(function(heart) {
          if (heart.style.opacity === '0') {
              heart.style.left = x + 'px';
              heart.style.top = y + 'px';
              heart.style.opacity = '1';
              animateHeart(heart);
          }
      });
  });

  function animateHeart(heart) {
      var y = parseInt(heart.style.top);
      var interval = setInterval(function() {
          if (y < 0 || parseFloat(heart.style.opacity) <= 0) {
              clearInterval(interval);
              heart.remove();
              hearts.splice(hearts.indexOf(heart), 1);
              i--;
              return;
          }
          y -= speed;
          heart.style.top = y + 'px';
          heart.style.opacity = parseFloat(heart.style.opacity) - 0.05;
      }, 50);
  }

  // Add CSS for the heart cursor effect dynamically
  var styleSheet = document.createElement("style");
  styleSheet.type = "text/css";
  styleSheet.innerText = ".heart-cursor { transition: left 0.05s, top 0.05s; }";
  document.head.appendChild(styleSheet);
  </script>

</head>
<body>
  <div id="wrapper">
    <div class="flag__birthday">
      <img src="./flag-birthday-left.png" alt="" class="flag__left">
      <img src="./flag-birthday-right.png" alt="" class="flag__right">
    </div>
    <div class="content">
      <div class="left">
        <div class="title">
          <div class="happy">
            <span style="--t: 0.5s;">H</span>
            <span style="--t: 0.7s;">a</span>
            <span style="--t: 0.9s;">p</span>
            <span style="--t: 1.1s;">p</span>
            <span style="--t: 1.3s;">y</span>
          </div>
          <div class="birthday">
            <span style="--t: 1.5s;">B</span>
            <span style="--t: 1.7s;">i</span>
            <span style="--t: 1.9s;">r</span>
            <span style="--t: 2.1s;">t</span>
            <span style="--t: 2.3s;">h</span>
            <span style="--t: 2.5s;">d</span>
            <span style="--t: 2.7s;">a</span>
            <span style="--t: 2.9s;">y</span>
          </div>
          <img src="./hat.png" alt="" class="hat">
        </div>
        <div class="date__of__birth">
          <span>00/00/0000</span>
          <span>&#x2022;</span>
          <span>00/00/0000</span>
        </div>
        <div class="btn">
          <button id="btn__letter">
            Click to open letter
            <i class="fa-solid fa-heart"></i>
          </button>
        </div>
      </div>
      <div class="right">
        <div class="box__account">
          <div class="image">
            <img src="./image.jpg" alt="">
          </div>
          <div class="name">
            <span>Name</span>
          </div>
        </div>
        <div class="cricle">
          <div class="text__cricle">
            <span style="--i: 1;">H</span>
            <span style="--i: 2;">a</span>
            <span style="--i: 3;">p</span>
            <span style="--i: 4;">p</span>
            <span style="--i: 5;">y</span>
            <span style="--i: 6;">B</span>
            <span style="--i: 7;">i</span>
            <span style="--i: 8;">r</span>
            <span style="--i: 9;">t</span>
            <span style="--i: 10;">h</span>
            <span style="--i: 11;">d</span>
            <span style="--i: 12;">a</span>
            <span style="--i: 13;">y</span>
            <span style="--i: 14;">!</span>
          </div>
          <i class="fa-solid fa-heart"></i>
        </div>
        <img src="./balloon-one.png" alt="" class="balloon_one">
        <img src="./balloon-two.png" alt="" class="balloon_two">
      </div>
    </div>
    <div class="decorate_star star1" style="--t: 15s;"></div>
    <div class="decorate_star star2" style="--t: 14s;"></div>
    <div class="decorate_star star3" style="--t: 16s;"></div>
    <div class="decorate_star star4" style="--t: 13s;"></div>
    <div class="decorate_star star5" style="--t: 17s;"></div>
    <img src="./flower-decorate.png" alt="" class="decorate_flower--one" style="--t: 18s;">
    <img src="./flower-decorate.png" alt="" class="decorate_flower--two" style="--t: 19s;">
    <img src="./flower-decorate.png" alt="" class="decorate_flower--three" style="--t: 20s;">
    <img src="./smiley-icon.png" alt="" class="smiley__icon">
    <img src="./decorate-bottom.png" alt="" class="decorate_bottom">

    <div class="box__letter">
      <div class="letter__border">
        <div class="close">
          <i class="fa-solid fa-xmark"></i>
        </div>
        <div class="letter">
          <div class="title__letter"></div>
          <div class="content__letter">
            <div class="left">
              <img src="./heart-letter.png" alt="" id="heart__letter">
              <img src="./heart.png" alt="" class="heart heart_1" style="--t: 0.3s;">
              <img src="./heart.png" alt="" class="heart heart_2" style="--t: 0.8s;">
              <img src="./heart.png" alt="" class="heart heart_3" style="--t: 0.6s;">
              <img src="./heart.png" alt="" class="heart heart_4" style="--t: 1s;">
            </div>
            <div class="right">
              <img src="./love-img.png" alt="" class="love__img">
              <div class="text__letter"></div>
              <img src="./mewmew.png" alt="" id="mewmew">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="copy">
    <p>Aoudumber Bade</p>
    <a href="https://github.com/Aoudumber-Bade" target="_blank">
      <i class="fa-brands fa-github"></i>
    </a>
  </div>

  <script>
    // --- Message Content for Typing Animation (NOW IN HTML) ---
    const charArrTitleLetter = ["W", "i", "s", "h", " ", "y", "o", "u", " ", "t", "h", "e", " ", "b", "e", "s", "t", "!", " ", "❤️"];
    
    // THE CUSTOM MESSAGE IS PLACED HERE
    const charArrDateLetter = [
      "Dearest [Person's Name],",
      "\\n\\n",
      "Happy Birthday! I hope your special day is filled with joy, laughter, and all the happiness you can handle.",
      "\\n\\n",
      "You are such a wonderful person, and I feel incredibly lucky to have you in my life. May this next year bring you success, adventure, and everything you wish for.",
      "\\n\\n",
      "Sending you the biggest virtual hug and all my love.",
      "\\n",
      "Happy Birthday!",
      "\\n\\n",
      "With love,",
      "\\n",
      "[Your Name]"
    ];
    // NOTE: "\\n" is used as a placeholder for a new line/paragraph break.
    // Replace [Person's Name] and [Your Name] above!


    const title__letter = document.querySelector(".title__letter");
    const text__letter = document.querySelector(".text__letter");
    let currentIndexTitle = 0;
    let currentIndexLetter = 0;
    let intervalTitle;
    let intervalContent;
    let isTitleComplete = false;
    

    // Function to handle the custom new line placeholder
    function typeLetter(arr, element, delay, callback) {
        if (currentIndexLetter >= arr.length) {
            if (callback) callback();
            return;
        }

        const char = arr[currentIndexLetter];
        
        if (char === "\\n") {
            element.innerHTML += '<br>';
        } else if (char === "\\n\\n") {
            element.innerHTML += '<br><br>';
        } else {
            element.textContent += char;
        }
        
        currentIndexLetter++;
        
        // Use requestAnimationFrame for smoother timing or a slightly faster setTimeout
        setTimeout(() => typeLetter(arr, element, delay, callback), delay);
    }

    $("#btn__letter").on("click", function() {
      // 1. Show the background and the letter box
      $(".box__letter").slideDown(500);
      $(".letter__border").slideDown(500);

      // 2. Start title typing (0.5s delay)
      setTimeout(function() {
        intervalTitle = setInterval(function() {
          if (currentIndexTitle < charArrTitleLetter.length) {
            title__letter.textContent += charArrTitleLetter[currentIndexTitle];
            currentIndexTitle++;
          } else {
            clearInterval(intervalTitle);
            isTitleComplete = true;
          }
        }, 80);
      }, 500); // Start after 0.5s

      // 3. Images fade in (1.5s delay after button click)
      setTimeout(function() {
        document.querySelector("#heart__letter").classList.add("animationOp");
        document.querySelector(".love__img").classList.add("animationOp");
        document.querySelector("#mewmew").classList.add("animationOp");
      }, 1500); // 1.5s delay

      // 4. Small hearts animation starts (2.0s delay after button click)
      setTimeout(function() {
        document.querySelectorAll(".heart").forEach((item) => {
          item.classList.add("animation");
        });
      }, 2000); // 2.0s delay

      // 5. Start content typing (3.0s delay after button click)
      setTimeout(function() {
        // Reset and start content typing animation
        currentIndexLetter = 0;
        text__letter.textContent = "";
        typeLetter(charArrDateLetter, text__letter, 50);
      }, 3000); // 3.0s delay (Enough time for title/images to appear)
    });

    $(".close").on("click", function() {
      // Clear all intervals/timeouts to stop animations
      clearInterval(intervalTitle);
      // Since typeLetter is recursive setTimeout, we don't have a simple interval to clear. 
      // Reopening the letter resets currentIndexLetter anyway, which is fine.

      // Reset all content and animation classes
      title__letter.textContent = "";
      text__letter.textContent = "";
      currentIndexTitle = 0;
      
      document.querySelector("#heart__letter").classList.remove("animationOp");
      document.querySelector(".love__img").classList.remove("animationOp");
      document.querySelector("#mewmew").classList.remove("animationOp");
      document.querySelectorAll(".heart").forEach((item) => {
        item.classList.remove("animation");
      });
      
      // Hide the letter box
      $(".box__letter").slideUp(500);
      $(".letter__border").slideUp(500);
    });
  </script>
</body>
</html>
